<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kg.seeot.mybatis.board.BoardMapper">

	<resultMap type="com.kg.seeot.board.dto.BoardDTO" id="board">
		<id property="memberId" column="member_id" />
		<result property="memberName" column="member_name" />
		<result property="boardNo" column="board_no" />
		<result property="boardTitle" column="board_title" />
		<result property="boardContent" column="board_content" />
		<result property="boardDate" column="board_date" />
		<result property="boardGroup" column="board_group" />
		<result property="boardIndent" column="board_indent" />
		<result property="boardQnAType" column="board_qnatype"/>
		<result property="boardStatus" column="board_status"/>
	</resultMap>
	
	<resultMap type="com.kg.seeot.board.dto.FileDTO" id="file">
		<result property="fileOriginName" column="file_origin_name"/>
		<result property="fileSaveName" column="file_save_name"/>
		<result property="boardNo" column="board_No"/>
	</resultMap>

	<select id="boardList" resultMap="board">
		select * from seeot_board
	</select>

	<select id="boardContentView" resultMap="board">
		select * from seeot_board
		where board_no=#{boardNo}
	</select>

	<delete id="delete">
		delete from seeot_board where member_id=#{memberId}
	</delete>

	<insert id="writeSave">
	    insert into seeot_board(member_id, member_name, board_no, board_title, board_content, board_qnatype, board_status)
		values(#{memberId}, #{memberName}, board_seq.nextval, #{boardTitle}, #{boardContent}, #{boardQnAType}, #{boardStatus})
		
		<selectKey keyProperty="boardNo" order="AFTER" resultType="int">
			select board_seq.currval from dual
		</selectKey>
	</insert>
	
	<insert id="writeFileSave" useGeneratedKeys="true">
	 	insert into seeot_board_file(file_origin_name, file_save_name, board_no)
		values(#{fileOriginName}, #{fileSaveName}, #{boardNo})
	</insert>


</mapper>

















